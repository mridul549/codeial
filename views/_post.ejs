<% for (let i = 0; i < posts.length; i++) { %>

  <li>
    <!-- if the user who is signed in and the user who created the post are the same, -->
    <!-- then only show the delete option on the page  -->
    <% if((locals.user) && (locals.user.id == posts[i].user.id)) {%>
    <small>
      <a href="/posts/destroy/<%= posts[i].id %> ">X</a>
    </small>
    <% } %>

    <!-- show the contents of the post and the author -->
    <%= posts[i].content %>
    <small class="author"> by <%= posts[i].user.name %> </small>
  </li>

  <div class="post-comment">

    <!-- if user is signed in then only let him add a post-->
    <% if(locals.user) { %>
      <form action="/comments/create" method="post">
        <input class="comment-input" type="text" name="content" placeholder="Add comment..." />
        <!-- hidden input being used to fetch the id of the user who is creating the post -->
        <input type="hidden" name="post" value="<%= posts[i]._id %>" />
        <input class="add-btn" type="submit" value="Comment" />
      </form>
    <% } %>

    <!-- adding comments to a post -->
    <div class="post-comment-list">
      <ul id="post-comment-<%= posts[i]._id%>">
        <% for (comment of posts[i].comments) { %>
          <%- include("_comment") %> 
        <% } %>
      </ul>
    </div>
  </div>

<% } %> 